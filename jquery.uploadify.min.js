/*!
Uploadify 2.1.1
Release Date: February 22, 2014
Copyright (c) 2009 Ronnie Garcia, Travis Nickels | License: MIT
*/
jQuery&&function(a){a.extend(a.fn,{uploadify:function(b){a(this).each(function(){settings=a.extend({id:a(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:30,width:110,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:999,simUploadLimit:1,queueID:!1,displayData:"percentage",onInit:function(){},onSelect:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onComplete:function(){},onAllComplete:function(){}},b);var c=location.pathname;c=c.split("/"),c.pop(),c=c.join("/")+"/";var d={};if(d.uploadifyID=settings.id,d.pagepath=c,settings.buttonImg&&(d.buttonImg=escape(settings.buttonImg)),settings.buttonText&&(d.buttonText=escape(settings.buttonText)),settings.rollover&&(d.rollover=!0),d.script=settings.script,d.folder=escape(settings.folder),settings.scriptData){var e="";for(var f in settings.scriptData)e+="&"+f+"="+settings.scriptData[f];d.scriptData=escape(e.substr(1))}d.width=settings.width,d.height=settings.height,d.wmode=settings.wmode,d.method=settings.method,d.queueSizeLimit=settings.queueSizeLimit,d.simUploadLimit=settings.simUploadLimit,settings.hideButton&&(d.hideButton=!0),settings.fileDesc&&(d.fileDesc=settings.fileDesc),settings.fileExt&&(d.fileExt=settings.fileExt),settings.multi&&(d.multi=!0),settings.auto&&(d.auto=!0),settings.sizeLimit&&(d.sizeLimit=settings.sizeLimit),settings.checkScript&&(d.checkScript=settings.checkScript),settings.fileDataName&&(d.fileDataName=settings.fileDataName),settings.queueID&&(d.queueID=settings.queueID),settings.onInit()!==!1&&(a(this).css("display","none"),a(this).after('<div id="'+a(this).attr("id")+'Uploader"></div>'),swfobject.embedSWF(settings.uploader,settings.id+"Uploader",settings.width,settings.height,"9.0.24",settings.expressInstall,d,{quality:"high",wmode:settings.wmode,allowScriptAccess:settings.scriptAccess}),0==settings.queueID&&a("#"+a(this).attr("id")+"Uploader").after('<div id="'+a(this).attr("id")+'Queue" class="uploadifyQueue"></div>')),"function"==typeof settings.onOpen&&a(this).bind("uploadifyOpen",settings.onOpen),a(this).bind("uploadifySelect",{action:settings.onSelect,queueID:settings.queueID},function(b,c,d){if(b.data.action(b,c,d)!==!1){var e=.01*Math.round(d.size/1024*100),f="KB";e>1e3&&(e=.01*Math.round(.001*e*100),f="MB");var g=e.toString().split(".");e=g.length>1?g[0]+"."+g[1].substr(0,2):g[0],fileName=d.name.length>20?d.name.substr(0,20)+"...":d.name,queue="#"+a(this).attr("id")+"Queue",b.data.queueID&&(queue="#"+b.data.queueID);var h;"tmpl"in window?(h={coreId:c,elementId:a(this).attr("id"),cancelImg:settings.cancelImg,fileName:fileName,byteSize:e,suffix:f},a(queue).append(window.tmpl("uploadify-item-template",h))):(h="",h+='<div id="'+a(this).attr("id")+c+'" class="uploadifyQueueItem">',h+='<div class="cancel">',h+="<a href=\"javascript:jQuery('#"+a(this).attr("id")+"').uploadifyCancel('"+c+'\')"><img src="'+settings.cancelImg+'" border="0" /></a>',h+="</div>",h+='<span class="fileName">'+fileName+" ("+e+f+')</span><span class="percentage"></span>',h+='<div class="uploadifyProgress">',h+='<div id="'+a(this).attr("id")+c+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>',h+="</div>",h+="</div>",a(queue).append(h))}}),"function"==typeof settings.onSelectOnce&&a(this).bind("uploadifySelectOnce",settings.onSelectOnce),a(this).bind("uploadifyQueueFull",{action:settings.onQueueFull},function(a,b){a.data.action(a,b)!==!1&&alert("The queue is full.  The max size is "+b+".")}),a(this).bind("uploadifyCheckExist",{action:settings.onCheck},function(b,d,e,f,g){var h={};if(h=e,h.folder=c+f,g)for(var i in e)var j=i;a.post(d,h,function(c){for(var h in c)if(b.data.action(b,d,e,f,g)!==!1){var i=confirm("Do you want to replace the file "+c[h]+"?");i||document.getElementById(a(b.target).attr("id")+"Uploader").cancelFileUpload(h,!0,!0)}g?document.getElementById(a(b.target).attr("id")+"Uploader").startFileUpload(j,!0):document.getElementById(a(b.target).attr("id")+"Uploader").startFileUpload(null,!0)},"json")}),a(this).bind("uploadifyCancel",{action:settings.onCancel},function(b,c,d,e,f){if(b.data.action(b,c,d,e,f)!==!1){var g=1==f?0:250;a("#"+a(this).attr("id")+c).fadeOut(g,function(){a(this).remove()})}}),"function"==typeof settings.onClearQueue&&a(this).bind("uploadifyClearQueue",settings.onClearQueue);var g=[];a(this).bind("uploadifyError",{action:settings.onError},function(b,c,d,e){if(b.data.action(b,c,d,e)!==!1){var f=new Array(c,d,e);g.push(f),a("#"+a(this).attr("id")+c+" .percentage").text(" - "+e.type+" Error"),a("#"+a(this).attr("id")+c).addClass("uploadifyError")}}),a(this).bind("uploadifyProgress",{action:settings.onProgress,toDisplay:settings.displayData},function(b,c,d,e){b.data.action(b,c,d,e)!==!1&&(a("#"+a(this).attr("id")+c+"ProgressBar").css("width",e.percentage+"%"),"percentage"==b.data.toDisplay&&(displayData=" - "+e.percentage+"%"),"speed"==b.data.toDisplay&&(displayData=" - "+e.speed+"KB/s"),null==b.data.toDisplay&&(displayData=" "),a("#"+a(this).attr("id")+c+" .percentage").text(displayData))}),a(this).bind("uploadifyComplete",{action:settings.onComplete},function(b,c,d,e,f){b.data.action(b,c,d,unescape(e),f)!==!1&&(a("#"+a(this).attr("id")+c+" .percentage").text(" - Completed"),a("#"+a(this).attr("id")+c).fadeOut(250,function(){a(this).remove()}))}),"function"==typeof settings.onAllComplete&&a(this).bind("uploadifyAllComplete",{action:settings.onAllComplete},function(a,b){a.data.action(a,b)!==!1&&(g=[])})})},uploadifySettings:function(b,c,d){var e=!1;if(a(this).each(function(){if("scriptData"==b&&null!=c){var f;f=d?c:a.extend(settings.scriptData,c);var g="";for(var h in f)g+="&"+h+"="+escape(f[h]);c=g.substr(1)}e=document.getElementById(a(this).attr("id")+"Uploader").updateSettings(b,c)}),null==c){if("scriptData"==b){for(var f=unescape(e).split("&"),g={},h=0;h<f.length;h++){var i=f[h].split("=");g[i[0]]=i[1]}e=g}return e}},uploadifyUpload:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").startFileUpload(b,!1)})},uploadifyCancel:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").cancelFileUpload(b,!0,!1)})},uploadifyClearQueue:function(){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").clearFileUploadQueue(!1)})}})}(jQuery);