/*!
Uploadify 2.2.0
Release Date: November 15, 2015
Copyright (c) 2009 Ronnie Garcia, Travis Nickels | License: MIT
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery","swfobject"],a):"object"==typeof module&&module.exports?module.exports=a(require("jquery"),require("swfobject")):a(jQuery,window.swfobject)}(function(a,b){a&&function(a){a.extend(a.fn,{uploadify:function(c){a(this).each(function(){settings=a.extend({id:a(this).attr("id"),uploader:"uploadify.swf",script:"uploadify.php",expressInstall:null,folder:"",height:30,width:110,cancelImg:"cancel.png",wmode:"opaque",scriptAccess:"sameDomain",fileDataName:"Filedata",method:"POST",queueSizeLimit:999,simUploadLimit:1,queueID:!1,displayData:"percentage",onInit:function(){},onSelect:function(){},onQueueFull:function(){},onCheck:function(){},onCancel:function(){},onError:function(){},onProgress:function(){},onSelectOnce:function(){},onComplete:function(){},onAllComplete:function(){},template:function(a){var b="";return b+='<div id="'+a.elementId+a.coreId+'" class="uploadifyQueueItem">',b+='<div class="cancel">',b+="<a href=\"javascript:jQuery('#"+a.elementId+"').uploadifyCancel('"+a.coreId+'\')"><img src="'+a.cancelImg+'" border="0" /></a>',b+="</div>",b+='<span class="fileName">'+a.fileName+" ("+a.byteSize+a.suffix+')</span><span class="percentage"></span>',b+='<div class="uploadifyProgress">',b+='<div id="'+a.elementId+a.coreId+'ProgressBar" class="uploadifyProgressBar"><!--Progress Bar--></div>',b+="</div>",b+="</div>"}},c);var d=location.pathname;d=d.split("/"),d.pop(),d=d.join("/")+"/";var e={};if(e.uploadifyID=settings.id,e.pagepath=d,settings.buttonImg&&(e.buttonImg=escape(settings.buttonImg)),settings.buttonText&&(e.buttonText=escape(settings.buttonText)),settings.rollover&&(e.rollover=!0),e.script=settings.script,e.folder=escape(settings.folder),settings.scriptData){var f="";for(var g in settings.scriptData)f+="&"+g+"="+settings.scriptData[g];e.scriptData=escape(f.substr(1))}e.width=settings.width,e.height=settings.height,e.wmode=settings.wmode,e.method=settings.method,e.queueSizeLimit=settings.queueSizeLimit,e.simUploadLimit=settings.simUploadLimit,settings.hideButton&&(e.hideButton=!0),settings.fileDesc&&(e.fileDesc=settings.fileDesc),settings.fileExt&&(e.fileExt=settings.fileExt),settings.multi&&(e.multi=!0),settings.auto&&(e.auto=!0),settings.sizeLimit&&(e.sizeLimit=settings.sizeLimit),settings.checkScript&&(e.checkScript=settings.checkScript),settings.fileDataName&&(e.fileDataName=settings.fileDataName),settings.queueID&&(e.queueID=settings.queueID),settings.onInit()!==!1&&(a(this).css("display","none"),a(this).after('<div id="'+a(this).attr("id")+'Uploader"></div>'),b.embedSWF(settings.uploader,settings.id+"Uploader",settings.width,settings.height,"9.0.24",settings.expressInstall,e,{quality:"high",wmode:settings.wmode,allowScriptAccess:settings.scriptAccess}),0==settings.queueID&&a("#"+a(this).attr("id")+"Uploader").after('<div id="'+a(this).attr("id")+'Queue" class="uploadifyQueue"></div>')),"function"==typeof settings.onOpen&&a(this).bind("uploadifyOpen",settings.onOpen),a(this).bind("uploadifySelect",{action:settings.onSelect,queueID:settings.queueID},function(b,c,d){if(b.data.action(b,c,d)!==!1){var e=.01*Math.round(d.size/1024*100),f="KB";e>1e3&&(e=.01*Math.round(.001*e*100),f="MB");var g=e.toString().split(".");e=g.length>1?g[0]+"."+g[1].substr(0,2):g[0],d.name.length>20?fileName=d.name.substr(0,20)+"...":fileName=d.name,queue="#"+a(this).attr("id")+"Queue",b.data.queueID&&(queue="#"+b.data.queueID),a(queue).append(settings.template.call(this,{coreId:c,elementId:a(this).attr("id"),cancelImg:settings.cancelImg,fileName:fileName,byteSize:e,suffix:f}))}}),"function"==typeof settings.onSelectOnce&&a(this).bind("uploadifySelectOnce",settings.onSelectOnce),a(this).bind("uploadifyQueueFull",{action:settings.onQueueFull},function(a,b){a.data.action(a,b)!==!1&&alert("The queue is full.  The max size is "+b+".")}),a(this).bind("uploadifyCheckExist",{action:settings.onCheck},function(b,c,e,f,g){var h={};if(h=e,h.folder=d+f,g)for(var i in e)var j=i;a.post(c,h,function(d){for(var h in d)if(b.data.action(b,c,e,f,g)!==!1){var i=confirm("Do you want to replace the file "+d[h]+"?");i||document.getElementById(a(b.target).attr("id")+"Uploader").cancelFileUpload(h,!0,!0)}g?document.getElementById(a(b.target).attr("id")+"Uploader").startFileUpload(j,!0):document.getElementById(a(b.target).attr("id")+"Uploader").startFileUpload(null,!0)},"json")}),a(this).bind("uploadifyCancel",{action:settings.onCancel},function(b,c,d,e,f){if(b.data.action(b,c,d,e,f)!==!1){var g=1==f?0:250;a("#"+a(this).attr("id")+c).fadeOut(g,function(){a(this).remove()})}}),"function"==typeof settings.onClearQueue&&a(this).bind("uploadifyClearQueue",settings.onClearQueue);var h=[];a(this).bind("uploadifyError",{action:settings.onError},function(b,c,d,e){if(b.data.action(b,c,d,e)!==!1){var f=new Array(c,d,e);h.push(f),a("#"+a(this).attr("id")+c+" .percentage").text(" - "+e.type+" Error"),a("#"+a(this).attr("id")+c).addClass("uploadifyError")}}),a(this).bind("uploadifyProgress",{action:settings.onProgress,toDisplay:settings.displayData},function(b,c,d,e){b.data.action(b,c,d,e)!==!1&&(a("#"+a(this).attr("id")+c+"ProgressBar").css("width",e.percentage+"%"),"percentage"==b.data.toDisplay&&(displayData=" - "+e.percentage+"%"),"speed"==b.data.toDisplay&&(displayData=" - "+e.speed+"KB/s"),null==b.data.toDisplay&&(displayData=" "),a("#"+a(this).attr("id")+c+" .percentage").text(displayData))}),a(this).bind("uploadifyComplete",{action:settings.onComplete},function(b,c,d,e,f){b.data.action(b,c,d,unescape(e),f)!==!1&&(a("#"+a(this).attr("id")+c+" .percentage").text(" - Completed"),a("#"+a(this).attr("id")+c).fadeOut(250,function(){a(this).remove()}))}),"function"==typeof settings.onAllComplete&&a(this).bind("uploadifyAllComplete",{action:settings.onAllComplete},function(a,b){a.data.action(a,b)!==!1&&(h=[])})})},uploadifySettings:function(b,c,d){var e=!1;if(a(this).each(function(){if("scriptData"==b&&null!=c){var f;f=d?c:a.extend(settings.scriptData,c);var g="";for(var h in f)g+="&"+h+"="+escape(f[h]);c=g.substr(1)}e=document.getElementById(a(this).attr("id")+"Uploader").updateSettings(b,c)}),null==c){if("scriptData"==b){for(var f=unescape(e).split("&"),g={},h=0;h<f.length;h++){var i=f[h].split("=");g[i[0]]=i[1]}e=g}return e}},uploadifyUpload:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").startFileUpload(b,!1)})},uploadifyCancel:function(b){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").cancelFileUpload(b,!0,!1)})},uploadifyClearQueue:function(){a(this).each(function(){document.getElementById(a(this).attr("id")+"Uploader").clearFileUploadQueue(!1)})}})}(a)});